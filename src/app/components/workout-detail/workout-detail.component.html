<div *ngIf="workout; else notFound" class="workout-detail">
  <h2>🏋️ {{ workout.name }}</h2>
  <p>📅 {{ workout.days.join(', ') }}</p>

  <button class="add-btn" (click)="openModal()">+ Adicionar exercício</button>

  <hr />

  <h3>💪 Exercícios</h3>
  <ul>
    <li *ngFor="let ex of workout.exercises; let i = index">
      {{ ex.name }} — {{ ex.sets }}x{{ ex.reps }} — {{ ex.weight }}kg
      <button class="delete-btn" (click)="removeExercise(i)">🗑️</button>
    </li>
  </ul>

  <button class="back-btn" (click)="goBack()">⬅ Voltar</button>

  <!-- Modal -->
  <div class="modal-backdrop" *ngIf="showModal" (click)="closeModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <ng-container *ngIf="!selectedExercise; else exerciseForm">
        <h3>Selecione um exercício</h3>

        <ul class="exercise-list">
          <li
            *ngFor="let ex of availableExercises"
            (click)="selectExercise(ex)"
            class="exercise-item"
          >
            {{ ex.name }}
          </li>
        </ul>

        <button (click)="closeModal()">Cancelar</button>
      </ng-container>

      <!-- Form de customização -->
      <ng-template #exerciseForm>
        <h3>{{ selectedExercise?.name }}</h3>

        <label>
          Séries:
          <input type="number" [(ngModel)]="customExercise.sets" />
        </label>

        <label>
          Repetições:
          <input type="number" [(ngModel)]="customExercise.reps" />
        </label>

        <label>
          Carga (kg):
          <input type="number" [(ngModel)]="customExercise.weight" />
        </label>

        <div class="modal-actions">
          <button (click)="confirmAddExercise()">Salvar</button>
          <button (click)="selectedExercise = null">Voltar</button>
        </div>
      </ng-template>
    </div>
  </div>
</div>

<ng-template #notFound>
  <p>Treino não encontrado.</p>
  <button (click)="goBack()">Voltar</button>
</ng-template>
